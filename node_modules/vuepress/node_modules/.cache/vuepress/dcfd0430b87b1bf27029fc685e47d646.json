{"remainingRequest":"/home/ubuntu-jordan/git/powerapidocstest/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/home/ubuntu-jordan/git/powerapidocstest/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu-jordan/git/powerapidocstest/node_modules/vue-loader/lib/index.js??ref--1-1!/home/ubuntu-jordan/git/powerapidocstest/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/home/ubuntu-jordan/git/powerapidocstest/docs/howto/measure_socket.md?vue&type=template&id=a7e3337e&","dependencies":[{"path":"/home/ubuntu-jordan/git/powerapidocstest/docs/howto/measure_socket.md","mtime":1559743630270},{"path":"/home/ubuntu-jordan/git/powerapidocstest/node_modules/cache-loader/dist/cjs.js","mtime":1559810001878},{"path":"/home/ubuntu-jordan/git/powerapidocstest/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1559739068304},{"path":"/home/ubuntu-jordan/git/powerapidocstest/node_modules/cache-loader/dist/cjs.js","mtime":1559810001878},{"path":"/home/ubuntu-jordan/git/powerapidocstest/node_modules/vue-loader/lib/index.js","mtime":1559739068304},{"path":"/home/ubuntu-jordan/git/powerapidocstest/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1559810004709}],"contextDependencies":[],"result":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('p',[_vm._v(\"This tutorial presents how to assemble a formula (RAPL-formula) and a sensor\\n(HWPC-sensor) to build a power meter that monitor the power consumption of each\\nCPU socket.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"First of all, we describe the power meter that we want to build. Then, we\\ndescribe how to deploy the power meter's component and how to connect\\nthem. Each component could be deployed with docker or directly by installing it\\non the system.\")]),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('p',[_vm._v(\"The power meter will use hardware counters that exist only on Intel CPU with\\nSandy Bridge architecture or higher. The power meter can't be used without\\ntheses counters.\")]),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_c('p',[_vm._v(\"Power meter estimations are based on the Running Average Power Limit (RAPL)\\ntechnology. RAPL provide a set of hardware counters that report data about the\\ncurrent energy consumption of each CPU socket. The power meter use the\\nHWPC-sensor to collect these data and send them to the RAPL-formula to compute\\nthe current energy consumption of monitored sockets.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Each component of the power meter could be hosted on a different machine. In\\nthis tutorial, we assume that each component are hosted on the same machine.\")]),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_c('p',[_vm._v(\"As explained \"),_c('router-link',{attrs:{\"to\":\"./powerapi_howitworks.html#power-meter-architecture\"}},[_vm._v(\"here\")]),_vm._v(\" The power\\nmeter need two mongoDB databases to connect the formula to the sensor and to\\nstore the power consumption information computed by the formula.\")],1),_vm._v(\" \"),_vm._m(5),_vm._v(\" \"),_vm._m(6),_vm._v(\" \"),_vm._m(7),_vm._v(\" \"),_vm._m(8),_vm._v(\" \"),_vm._m(9),_vm._v(\" \"),_c('p',[_vm._v(\"Power information data are structured as this json format :\")]),_vm._v(\" \"),_vm._m(10),_vm._v(\" \"),_c('p',[_vm._v(\"For example to display a power consumption report with the mongo client :\")]),_vm._v(\" \"),_vm._m(11),_vm._v(\" \"),_vm._m(12),_vm._v(\" \"),_c('p',[_vm._v(\"This section present how to deploy and connect each component of the power\\nmeter with docker. You will see how to :\")]),_vm._v(\" \"),_vm._m(13),_vm._v(\" \"),_vm._m(14),_vm._v(\" \"),_c('p',[_vm._v(\"Download components image :\")]),_vm._v(\" \"),_vm._m(15),_vm._v(\" \"),_c('p',[_vm._v(\"Setup a docker network that will be used to connect each containers\")]),_vm._v(\" \"),_vm._m(16),_vm._v(\" \"),_vm._m(17),_vm._v(\" \"),_c('p',[_vm._v(\"Launch the mongoDB instance :\")]),_vm._v(\" \"),_vm._m(18),_vm._v(\" \"),_c('p',[_vm._v(\"Launch the sensor :\")]),_vm._v(\" \"),_vm._m(19),_vm._v(\" \"),_c('p',[_vm._v(\"Launch the formula :\")]),_vm._v(\" \"),_vm._m(20),_vm._v(\" \"),_vm._m(21),_vm._v(\" \"),_c('p',[_vm._v(\"This section present how to deploy and connect each component of the power\\nmeter without docker, by installing each of them on the monitored machine. You\\nwill see how to :\")]),_vm._v(\" \"),_vm._m(22),_vm._v(\" \"),_vm._m(23),_vm._v(\" \"),_vm._m(24),_vm._v(\" \"),_vm._m(25),_vm._v(\" \"),_c('p',[_vm._v(\"install the sensor from sources\")]),_vm._v(\" \"),_vm._m(26),_vm._v(\" \"),_c('p',[_vm._v(\"install the RAPL-formula\")]),_vm._v(\" \"),_vm._m(27),_vm._v(\" \"),_vm._m(28),_vm._v(\" \"),_c('p',[_vm._v(\"On the HWPC-sensor repository launch the sensor :\")]),_vm._v(\" \"),_vm._m(29),_vm._v(\" \"),_c('p',[_vm._v(\"launch the formula\")]),_vm._v(\" \"),_vm._m(30)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{attrs:{\"id\":\"how-to-monitor-power-consumption-of-a-socket\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#how-to-monitor-power-consumption-of-a-socket\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" How to monitor power consumption of a socket\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"introduction\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#introduction\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Introduction\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"compatible-architecture\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#compatible-architecture\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Compatible Architecture\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"power-meter-description\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#power-meter-description\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Power meter description\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"data-and-database\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#data-and-database\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Data and database\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"We assume that this two databases are hosted on the same mongoDB instance but\\ndifferent instances could be used for each database. In the rest of its\\ntutorial, the URI of the mongoDB instance will be \"),_c('code',[_vm._v(\"mongo://ADDR\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"The first database (that connect the formula and the sensor) will be called\\n\"),_c('code',[_vm._v(\"connection_db\")]),_vm._v(\" and the data will be store on the \"),_c('code',[_vm._v(\"hwrep\")]),_vm._v(\" collection.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"The second database (that store power consumption computed by the formula) will\\nbe called \"),_c('code',[_vm._v(\"output_db\")]),_vm._v(\" and data will be stored on the \"),_c('code',[_vm._v(\"power_consumption\")]),_vm._v(\"\\ncollection.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"get-power-meter-result\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#get-power-meter-result\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Get power meter result\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"To access to the power consumption information computed by the power meter just\\nconnect a mongo client to the mongoDB instance and retrieve the data of the\\n\"),_c('code',[_vm._v(\"power_consumption\")]),_vm._v(\" collection of the \"),_c('code',[_vm._v(\"output_db\")]),_vm._v(\" database.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"{\\n    \\\"_id\\\" : XXX # MongoDB object identifier (string)\\n    \\\"timestamp\\\" : YYY # timestamp of the power measure (iso date)\\n    \\\"metadata\\\" : {\\n            \\\"socket\\\" : \\\"N\\\", # socket identifier (int)\\n    },\\n    \\\"power\\\" : Z.ZZZ # power consumption expressed in watts (float)\\n}\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"mongo ADDR\\nuse output_db\\ndb.power_consumption.findOne()\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"deployment-with-docker\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#deployment-with-docker\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Deployment with docker\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\"deploy a mongoDB instance in a docker container\")]),_vm._v(\" \"),_c('li',[_vm._v(\"deploy the HWPC-sensor in a docker container and connect it to the mongoDB instance\")]),_vm._v(\" \"),_c('li',[_vm._v(\"deploy the RAPL-formula in a docker container and connect it to the mongoDB instance\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{attrs:{\"id\":\"setup-docker-environment\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#setup-docker-environment\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Setup docker environment\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"docker pull powerapi/hwpc-sensor\\ndocker pull powerapi/rapl-formula\\ndocker pull mongo\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"docker network create powerapi\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{attrs:{\"id\":\"launch-the-different-component\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#launch-the-different-component\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Launch the different component\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"docker run -td --name powerapi-mongo --net=powerapi -p 27017:27017 mongo\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"docker run --net=powerapi --privileged --name powerapi-sensor -td -v /sys:/sys -v /var/lib/docker/containers:/var/lib/docker/containers:ro -v /tmp/powerapi-sensor-reporting:/reporting powerapi/hwpc-sensor -n \\\"test-sensor\\\" -r \\\"mongodb\\\" -U \\\"mongodb://powerapi-mongo\\\" -D \\\"connection_db\\\" -C \\\"hwrep\\\" -s \\\"rapl\\\" -o -e \\\"RAPL_ENERGY_CORES\\\" -e \\\"RAPL_ENERGY_PKG\\\" -e \\\"RAPL_ENERGY_GPU\\\"\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"docker run -td --net=powerapi --name powerapi-formula powerapi/rapl-formula mongodb://powerapi-mongo connection_db hwrep mongodb://powerapi-mongo output_db power_consumption -s\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{attrs:{\"id\":\"deployment-without-docker\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#deployment-without-docker\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Deployment without docker\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\"compile the HWPC-sensor and connect it to an existing mongoDB instance\")]),_vm._v(\" \"),_c('li',[_vm._v(\"install the RAPL-formula and connect it to an existing mongoDB instance\")]),_vm._v(\" \"),_c('li',[_vm._v(\"launch the sensor and the formula from the command line\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{attrs:{\"id\":\"prerequisites\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#prerequisites\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Prerequisites\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\"python 3.7\")]),_vm._v(\" \"),_c('li',[_vm._v(\"pip\")]),_vm._v(\" \"),_c('li',[_vm._v(\"a mongoDB instance runing and accessible from the address \"),_c('code',[_vm._v(\"mongodb://ADDR\")])]),_vm._v(\" \"),_c('li',[_vm._v(\"root privilege to launch the sensor\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{attrs:{\"id\":\"component-installation\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#component-installation\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Component installation\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"git clone https://github.com/powerapi-ng/hwpc-sensor.git\\ncd hwpc-sensor\\ncmake .\\nmake\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"pip3 install rapl-formula\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{attrs:{\"id\":\"launch-the-different-component-2\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#launch-the-different-component-2\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" Launch the different component\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"sudo ./hwpc-sensor -n \\\"sensor\\\" -r \\\"mongodb\\\" -U \\\"mongodb://ADDR\\\" -D \\\"connection_db\\\" -C \\\"hwrep\\\" -s \\\"rapl\\\" -o -e \\\"RAPL_ENERGY_CORES\\\" -e \\\"RAPL_ENERGY_PKG\\\" -e \\\"RAPL_ENERGY_GPU\\\" &\\n\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('pre',[_c('code',[_vm._v(\"python3 -m rapl_formula mongodb://ADDR connection_db hwrep mongodb://ADDR output_db power_consumption -s &\\n\")])])}]\n\nexport { render, staticRenderFns }"]}